/*! For license information please see generator.js.LICENSE.txt */
(()=>{"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return n(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var o=0,a=function(){};return{s:a,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,i=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){u=!0,c=e},f:function(){try{i||null==r.return||r.return()}finally{if(u)throw c}}}}function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach(function(t){a(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function a(t,n,r){return(n=function(t){var n=function(t){if("object"!=e(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=e(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==e(n)?n:n+""}(n))in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t}function c(e,t,n,r){var o=new Uint32Array(2*e);window.crypto.getRandomValues(o);for(var a="",c="",i=new Set,u=0,s=0;s<e;s++){var d=void 0,l=0;do{var p=o[u++];if(u>=o.length&&(window.crypto.getRandomValues(o),u=0),d=t[p%t.length],l++,!(n&&d===c||r&&i.has(d))&&l>=10)break}while(n&&d===c||r&&i.has(d));a+=d,c=d,i.add(d)}return a}function i(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function u(e){return e.charAt(0).toUpperCase()+e.slice(1)}function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=o(o({},{length:4,noRepeats:!1,noConsecutive:!1}),e);if(t.noRepeats&&t.length>10)throw new Error("Cannot generate PIN with no repeats longer than 10 digits");var n=new Uint32Array(2*t.length);window.crypto.getRandomValues(n);for(var r="",a="",c=new Set,i=0;i<t.length;i++){var u=void 0,d=0;do{if(u="0123456789"[n[2*i+d]%10],++d>10)return s(o(o({},t),{},{noRepeats:!1,noConsecutive:!1}))}while(t.noConsecutive&&1===Math.abs(parseInt(u)-parseInt(a||"0"))||t.noRepeats&&c.has(u));r+=u,a=u,c.add(u)}return r}function d(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var u=r&&r.prototype instanceof i?r:i,s=Object.create(u.prototype);return l(s,"_invoke",function(n,r,o){var a,i,u,s=0,d=o||[],l=!1,p={p:0,n:0,v:e,a:m,f:m.bind(e,4),d:function(t,n){return a=t,i=0,u=e,p.n=n,c}};function m(n,r){for(i=n,u=r,t=0;!l&&s&&!o&&t<d.length;t++){var o,a=d[t],m=p.p,f=a[2];n>3?(o=f===r)&&(u=a[(i=a[4])?5:(i=3,3)],a[4]=a[5]=e):a[0]<=m&&((o=n<2&&m<a[1])?(i=0,p.v=r,p.n=a[1]):m<f&&(o=n<3||a[0]>r||r>f)&&(a[4]=n,a[5]=r,p.n=f,i=0))}if(o||n>1)return c;throw l=!0,r}return function(o,d,f){if(s>1)throw TypeError("Generator is already running");for(l&&1===d&&m(d,f),i=d,u=f;(t=i<2?e:u)||!l;){a||(i?i<3?(i>1&&(p.n=-1),m(i,u)):p.n=u:p.v=u);try{if(s=2,a){if(i||(o="next"),t=a[o]){if(!(t=t.call(a,u)))throw TypeError("iterator result is not an object");if(!t.done)return t;u=t.value,i<2&&(i=0)}else 1===i&&(t=a.return)&&t.call(a),i<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),i=1);a=e}else if((t=(l=p.n<0)?u:n.call(r,p))!==c)break}catch(t){a=e,i=1,u=t}finally{s=1}}return{value:t,done:l}}}(n,o,a),!0),s}var c={};function i(){}function u(){}function s(){}t=Object.getPrototypeOf;var p=[][r]?t(t([][r]())):(l(t={},r,function(){return this}),t),m=s.prototype=i.prototype=Object.create(p);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):(e.__proto__=s,l(e,o,"GeneratorFunction")),e.prototype=Object.create(m),e}return u.prototype=s,l(m,"constructor",s),l(s,"constructor",u),u.displayName="GeneratorFunction",l(s,o,"GeneratorFunction"),l(m),l(m,o,"Generator"),l(m,r,function(){return this}),l(m,"toString",function(){return"[object Generator]"}),(d=function(){return{w:a,m:f}})()}function l(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}l=function(e,t,n,r){function a(t,n){l(e,t,function(e){return this._invoke(t,n,e)})}t?o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(a("next",0),a("throw",1),a("return",2))},l(e,t,n,r)}function p(e,t,n,r,o,a,c){try{var i=e[a](c),u=i.value}catch(e){return void n(e)}i.done?t(u):Promise.resolve(u).then(r,o)}function m(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function c(e){p(a,r,o,c,i,"next",e)}function i(e){p(a,r,o,c,i,"throw",e)}c(void 0)})}}var f="vault",y="settings";function g(){return v.apply(this,arguments)}function v(){return(v=m(d().m(function e(){return d().w(function(e){for(;;)if(0===e.n)return e.a(2,new Promise(function(e,t){var n=indexedDB.open("secure-shelf-db",1);n.onerror=function(e){t("Error opening database: "+e.target.error)},n.onsuccess=function(t){e(t.target.result)},n.onupgradeneeded=function(e){var t=e.target.result;t.objectStoreNames.contains(f)||t.createObjectStore(f,{keyPath:"id"}),t.objectStoreNames.contains(y)||t.createObjectStore(y,{keyPath:"id"})}}))},e)}))).apply(this,arguments)}function h(e){return b.apply(this,arguments)}function b(){return(b=m(d().m(function e(t){var n;return d().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,g();case 1:return n=e.v,e.a(2,new Promise(function(e,r){var o=n.transaction([y],"readwrite"),a=o.objectStore(y).put(t);a.onsuccess=function(){e()},a.onerror=function(e){r("Error saving settings: "+e.target.error)},o.oncomplete=function(){n.close()}}))}},e)}))).apply(this,arguments)}function w(e){return E.apply(this,arguments)}function E(){return(E=m(d().m(function e(t){var n;return d().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,g();case 1:return n=e.v,e.a(2,new Promise(function(e,r){var o=n.transaction([y],"readonly"),a=o.objectStore(y).get(t);a.onsuccess=function(t){e(t.target.result)},a.onerror=function(e){r("Error retrieving settings: "+e.target.error)},o.oncomplete=function(){n.close()}}))}},e)}))).apply(this,arguments)}function I(e){return I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},I(e)}function B(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?B(Object(n),!0).forEach(function(t){S(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function S(e,t,n){return(t=function(e){var t=function(e){if("object"!=I(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=I(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==I(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function k(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var u=r&&r.prototype instanceof i?r:i,s=Object.create(u.prototype);return j(s,"_invoke",function(n,r,o){var a,i,u,s=0,d=o||[],l=!1,p={p:0,n:0,v:e,a:m,f:m.bind(e,4),d:function(t,n){return a=t,i=0,u=e,p.n=n,c}};function m(n,r){for(i=n,u=r,t=0;!l&&s&&!o&&t<d.length;t++){var o,a=d[t],m=p.p,f=a[2];n>3?(o=f===r)&&(u=a[(i=a[4])?5:(i=3,3)],a[4]=a[5]=e):a[0]<=m&&((o=n<2&&m<a[1])?(i=0,p.v=r,p.n=a[1]):m<f&&(o=n<3||a[0]>r||r>f)&&(a[4]=n,a[5]=r,p.n=f,i=0))}if(o||n>1)return c;throw l=!0,r}return function(o,d,f){if(s>1)throw TypeError("Generator is already running");for(l&&1===d&&m(d,f),i=d,u=f;(t=i<2?e:u)||!l;){a||(i?i<3?(i>1&&(p.n=-1),m(i,u)):p.n=u:p.v=u);try{if(s=2,a){if(i||(o="next"),t=a[o]){if(!(t=t.call(a,u)))throw TypeError("iterator result is not an object");if(!t.done)return t;u=t.value,i<2&&(i=0)}else 1===i&&(t=a.return)&&t.call(a),i<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),i=1);a=e}else if((t=(l=p.n<0)?u:n.call(r,p))!==c)break}catch(t){a=e,i=1,u=t}finally{s=1}}return{value:t,done:l}}}(n,o,a),!0),s}var c={};function i(){}function u(){}function s(){}t=Object.getPrototypeOf;var d=[][r]?t(t([][r]())):(j(t={},r,function(){return this}),t),l=s.prototype=i.prototype=Object.create(d);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):(e.__proto__=s,j(e,o,"GeneratorFunction")),e.prototype=Object.create(l),e}return u.prototype=s,j(l,"constructor",s),j(s,"constructor",u),u.displayName="GeneratorFunction",j(s,o,"GeneratorFunction"),j(l),j(l,o,"Generator"),j(l,r,function(){return this}),j(l,"toString",function(){return"[object Generator]"}),(k=function(){return{w:a,m:p}})()}function j(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}j=function(e,t,n,r){function a(t,n){j(e,t,function(e){return this._invoke(t,n,e)})}t?o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(a("next",0),a("throw",1),a("return",2))},j(e,t,n,r)}function C(e,t,n,r,o,a,c){try{var i=e[a](c),u=i.value}catch(e){return void n(e)}i.done?t(u):Promise.resolve(u).then(r,o)}function x(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function c(e){C(a,r,o,c,i,"next",e)}function i(e){C(a,r,o,c,i,"throw",e)}c(void 0)})}}var A,L,P,R,T={passwordLength:16,useUppercase:!0,useLowercase:!0,useNumbers:!0,useSymbols:!0,excludeAmbiguous:!1,excludeSimilar:!1,avoidConsecutive:!1,avoidRepeats:!1,passphraseWordCount:4,passphraseCapitalize:!0,passphraseIncludeNumber:!0,passphraseIncludeSymbol:!0,passphraseSeparator:"-",pinLength:4,pinAvoidRepeats:!1,pinAvoidConsecutive:!1,defaultGeneratorType:"password",autoRegenerateOnOptionChange:!0,saveGeneratorSettings:!0};function G(){return N.apply(this,arguments)}function N(){return(N=x(k().m(function e(){var t,n;return k().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,w("passwordGeneratorSettings");case 1:return t=e.v,e.a(2,t||T);case 2:return e.p=2,n=e.v,console.error("Error retrieving password settings:",n),e.a(2,T)}},e,null,[[0,2]])}))).apply(this,arguments)}function z(e){return _.apply(this,arguments)}function _(){return(_=x(k().m(function e(t){var n;return k().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,h("passwordGeneratorSettings",O(O({},T),t));case 1:e.n=3;break;case 2:e.p=2,n=e.v,console.error("Error saving password settings:",n);case 3:return e.a(2)}},e,null,[[0,2]])}))).apply(this,arguments)}function V(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var u=r&&r.prototype instanceof i?r:i,s=Object.create(u.prototype);return q(s,"_invoke",function(n,r,o){var a,i,u,s=0,d=o||[],l=!1,p={p:0,n:0,v:e,a:m,f:m.bind(e,4),d:function(t,n){return a=t,i=0,u=e,p.n=n,c}};function m(n,r){for(i=n,u=r,t=0;!l&&s&&!o&&t<d.length;t++){var o,a=d[t],m=p.p,f=a[2];n>3?(o=f===r)&&(u=a[(i=a[4])?5:(i=3,3)],a[4]=a[5]=e):a[0]<=m&&((o=n<2&&m<a[1])?(i=0,p.v=r,p.n=a[1]):m<f&&(o=n<3||a[0]>r||r>f)&&(a[4]=n,a[5]=r,p.n=f,i=0))}if(o||n>1)return c;throw l=!0,r}return function(o,d,f){if(s>1)throw TypeError("Generator is already running");for(l&&1===d&&m(d,f),i=d,u=f;(t=i<2?e:u)||!l;){a||(i?i<3?(i>1&&(p.n=-1),m(i,u)):p.n=u:p.v=u);try{if(s=2,a){if(i||(o="next"),t=a[o]){if(!(t=t.call(a,u)))throw TypeError("iterator result is not an object");if(!t.done)return t;u=t.value,i<2&&(i=0)}else 1===i&&(t=a.return)&&t.call(a),i<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),i=1);a=e}else if((t=(l=p.n<0)?u:n.call(r,p))!==c)break}catch(t){a=e,i=1,u=t}finally{s=1}}return{value:t,done:l}}}(n,o,a),!0),s}var c={};function i(){}function u(){}function s(){}t=Object.getPrototypeOf;var d=[][r]?t(t([][r]())):(q(t={},r,function(){return this}),t),l=s.prototype=i.prototype=Object.create(d);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):(e.__proto__=s,q(e,o,"GeneratorFunction")),e.prototype=Object.create(l),e}return u.prototype=s,q(l,"constructor",s),q(s,"constructor",u),u.displayName="GeneratorFunction",q(s,o,"GeneratorFunction"),q(l),q(l,o,"Generator"),q(l,r,function(){return this}),q(l,"toString",function(){return"[object Generator]"}),(V=function(){return{w:a,m:p}})()}function q(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}q=function(e,t,n,r){function a(t,n){q(e,t,function(e){return this._invoke(t,n,e)})}t?o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(a("next",0),a("throw",1),a("return",2))},q(e,t,n,r)}function M(e,t,n,r,o,a,c){try{var i=e[a](c),u=i.value}catch(e){return void n(e)}i.done?t(u):Promise.resolve(u).then(r,o)}function U(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function c(e){M(a,r,o,c,i,"next",e)}function i(e){M(a,r,o,c,i,"throw",e)}c(void 0)})}}var D="password",F={};function W(){A=document.getElementById("generatedOutput"),L=document.getElementById("strengthMeter"),P=document.getElementById("strengthText"),R=document.getElementById("strengthFeedback"),document.getElementById("passwordTabBtn").classList.add("active"),document.getElementById("passwordSettings").classList.add("active")}function $(){var e,t,n,r,o,a;document.getElementById("passwordTabBtn").addEventListener("click",function(){return Z("password")}),document.getElementById("passphraseTabBtn").addEventListener("click",function(){return Z("passphrase")}),document.getElementById("pinTabBtn").addEventListener("click",function(){return Z("pin")}),document.getElementById("copyBtn").addEventListener("click",K),document.getElementById("refreshBtn").addEventListener("click",J),document.getElementById("usePasswordBtn").addEventListener("click",Q),document.getElementById("saveSettingsBtn").addEventListener("click",X),document.getElementById("showAdvancedBtn").addEventListener("click",H),e=document.getElementById("passwordLength"),t=document.getElementById("lengthValue"),e.addEventListener("input",function(){t.textContent=e.value,F.autoRegenerateOnOptionChange&&J()}),["uppercase","lowercase","numbers","symbols","excludeAmbiguous","excludeSimilar","avoidConsecutive","avoidRepeats"].forEach(function(e){var t=document.getElementById(e);t&&t.addEventListener("change",function(){F.autoRegenerateOnOptionChange&&J()})}),["requiredChars","excludedChars"].forEach(function(e){var t=document.getElementById(e);t&&t.addEventListener("input",function(){F.autoRegenerateOnOptionChange&&J()})}),n=document.getElementById("wordCount"),r=document.getElementById("wordCountValue"),n.addEventListener("input",function(){r.textContent=n.value,F.autoRegenerateOnOptionChange&&J()}),["capitalize","includeNumber","includeSymbol"].forEach(function(e){var t=document.getElementById(e);t&&t.addEventListener("change",function(){F.autoRegenerateOnOptionChange&&J()})}),document.getElementById("separator").addEventListener("change",function(){F.autoRegenerateOnOptionChange&&J()}),o=document.getElementById("pinLength"),a=document.getElementById("pinLengthValue"),o.addEventListener("input",function(){a.textContent=o.value,F.autoRegenerateOnOptionChange&&J()}),["pinAvoidRepeats","pinAvoidConsecutive"].forEach(function(e){var t=document.getElementById(e);t&&t.addEventListener("change",function(){F.autoRegenerateOnOptionChange&&J()})})}function Z(e){D=e,document.querySelectorAll(".tab-btn").forEach(function(e){return e.classList.remove("active")}),document.getElementById("".concat(e,"TabBtn")).classList.add("active"),document.querySelectorAll(".settings-panel").forEach(function(e){return e.classList.remove("active")}),document.getElementById("".concat(e,"Settings")).classList.add("active"),J()}function H(){var e=document.getElementById("advancedSettings"),t=document.getElementById("showAdvancedBtn");"none"===e.style.display?(e.style.display="block",t.textContent="Hide Advanced Options"):(e.style.display="none",t.textContent="Show Advanced Options")}function J(){var e,n="password"===D?{length:parseInt(document.getElementById("passwordLength").value),uppercase:document.getElementById("uppercase").checked,lowercase:document.getElementById("lowercase").checked,numbers:document.getElementById("numbers").checked,symbols:document.getElementById("symbols").checked,excludeAmbiguous:document.getElementById("excludeAmbiguous").checked,excludeSimilar:document.getElementById("excludeSimilar").checked,noConsecutive:document.getElementById("avoidConsecutive").checked,noRepeats:document.getElementById("avoidRepeats").checked,required:document.getElementById("requiredChars").value,excluded:document.getElementById("excludedChars").value}:"passphrase"===D?{words:parseInt(document.getElementById("wordCount").value),capitalize:document.getElementById("capitalize").checked,includeNumber:document.getElementById("includeNumber").checked,includeSymbol:document.getElementById("includeSymbol").checked,separator:document.getElementById("separator").value}:"pin"===D?{length:parseInt(document.getElementById("pinLength").value),noRepeats:document.getElementById("pinAvoidRepeats").checked,noConsecutive:document.getElementById("pinAvoidConsecutive").checked}:{},r="";try{"password"===D?r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=o(o({},{length:16,uppercase:!0,lowercase:!0,numbers:!0,symbols:!0,excludeAmbiguous:!1,excludeSimilar:!1,required:"",excluded:"",noConsecutive:!1,noRepeats:!1}),e);n.uppercase||n.lowercase||n.numbers||n.symbols||(n.lowercase=!0);var r="";if(n.uppercase&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZ"),n.lowercase&&(r+="abcdefghijklmnopqrstuvwxyz"),n.numbers&&(r+="0123456789"),n.symbols&&(r+="!@#$%^&*()-_=+[]{}|;:,.<>?/"),n.excluded){var a,u=t(n.excluded);try{for(u.s();!(a=u.n()).done;){var s=a.value;r=r.replace(new RegExp(i(s),"g"),"")}}catch(e){u.e(e)}finally{u.f()}}if(n.excludeAmbiguous){var d,l=t("1lI0O{}[]()/'\"`~,;:.<>");try{for(l.s();!(d=l.n()).done;){var p=d.value;r=r.replace(new RegExp(i(p),"g"),"")}}catch(e){l.e(e)}finally{l.f()}}if(n.excludeSimilar){var m,f=t("il1Lo0O");try{for(f.s();!(m=f.n()).done;){var y=m.value;r=r.replace(new RegExp(i(y),"g"),"")}}catch(e){f.e(e)}finally{f.f()}}if(!r)throw new Error("No characters available after applying exclusions");for(var g="",v=0;v<100;){if(v++,g=c(n.length,r,n.noConsecutive,n.noRepeats),n.required){var h,b=!0,w=t(n.required);try{for(w.s();!(h=w.n()).done;){var E=h.value;if(!g.includes(E)){b=!1;break}}}catch(e){w.e(e)}finally{w.f()}if(!b)continue}var I=!0;if(n.uppercase&&!/[A-Z]/.test(g)&&(I=!1),n.lowercase&&!/[a-z]/.test(g)&&(I=!1),n.numbers&&!/[0-9]/.test(g)&&(I=!1),n.symbols&&!/[^A-Za-z0-9]/.test(g)&&(I=!1),I)break}return v>=100?function(e){var t="";e.uppercase&&(t+="ABCDEFGHJKLMNPQRSTUVWXYZ"),e.lowercase&&(t+="abcdefghijkmnopqrstuvwxyz"),e.numbers&&(t+="23456789"),e.symbols&&(t+="!@#$%^&*()-_=+"),t||(t="abcdefghijkmnopqrstuvwxyz23456789");var n=new Uint32Array(e.length);window.crypto.getRandomValues(n);for(var r="",o=0;o<e.length;o++)r+=t[n[o]%t.length];return r}(n):g}(n):"passphrase"===D?r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=o(o({},{words:4,capitalize:!0,includeNumber:!0,includeSymbol:!0,separator:"-"}),e),n=["apple","banana","carrot","diamond","elephant","forest","garden","harbor","island","jungle","kitchen","lemon","mountain","notebook","orange","penguin","quarter","river","sunset","tiger","umbrella","violet","window","xylophone","yellow","zebra","aircraft","butterfly","cactus","dolphin","eagle","falcon","giraffe","harvest","igloo","jacket","kangaroo","lighthouse","mushroom","nutmeg","octopus","panda","quilt","rainbow","sailboat","tornado","unicorn","volcano","waterfall","xylitol","yogurt","zucchini"],r=new Uint32Array(t.words);window.crypto.getRandomValues(r);for(var a=[],c=0;c<t.words;c++){var i=n[r[c]%n.length];a.push(t.capitalize?u(i):i)}if(t.includeNumber){var s=new Uint32Array(1);window.crypto.getRandomValues(s),a.push(String(s[0]%100+1))}if(t.includeSymbol){var d=new Uint32Array(1);window.crypto.getRandomValues(d),a.push("!@#$%^&*"[d[0]%8])}return a.join(t.separator)}(n):"pin"===D&&(r=s(n)),A.value=r,e=function(e){if(!e)return{score:0,label:"None",feedback:"No password provided"};var t=0,n=[];e.length>=8&&(t+=1),e.length>=12&&(t+=1),e.length>=16&&(t+=1),e.length>=20&&(t+=1),e.length>=24&&(t+=1);var r=0,o=/[A-Z]/.test(e),a=/[a-z]/.test(e),c=/[0-9]/.test(e),i=/[^A-Za-z0-9]/.test(e),u=0;o&&(u+=26),a&&(u+=26),c&&(u+=10),i&&(u+=33),u>0&&(r=Math.log2(Math.pow(u,e.length))),r>50&&(t+=1),r>60&&(t+=1),r>80&&(t+=1),r>100&&(t+=1),o&&(t+=1),a&&(t+=1),c&&(t+=1),i&&(t+=1),/(?:abcdef|qwerty|asdfgh|zxcvbn|12345|09876)/i.test(e)&&(t-=1,n.push("Avoid sequences of characters or numbers"));var s=e.match(/(.)\1{2,}/g);s&&(t-=s.length,n.push("Avoid repeating characters")),/^[A-Za-z]+$/.test(e)&&(t-=2,n.push("Add numbers and symbols")),/^[0-9]+$/.test(e)&&(t-=2,n.push("Add letters and symbols"));var d=Math.max(0,Math.min(4,Math.floor(t/3)));return d<=1?n.push("Consider using a longer password with more variety"):2===d?n.push("Good start, but could be stronger with more complexity"):3===d?n.push("Strong password, but even more length adds security"):n.push("Excellent password strength"),{score:d,label:["Very Weak","Weak","Medium","Strong","Very Strong"][d],entropy:Math.round(r),feedback:n.join(". ")}}(r),L.className="meter-fill strength-"+e.score,P.textContent=e.label,e.feedback?(R.textContent=e.feedback,R.style.display="block"):R.style.display="none"}catch(e){console.error("Error generating password:",e),te("Error: "+e.message)}}function K(){A.select(),document.execCommand("copy"),window.getSelection().removeAllRanges(),te("Copied to clipboard!")}function Q(){var e=A.value;window.opener?(window.opener.postMessage({type:"password-generated",password:e},"*"),window.close()):(chrome.runtime.sendMessage({action:"passwordGenerated",password:e}),window.location.href.includes("popup=true")&&window.close())}function X(){return Y.apply(this,arguments)}function Y(){return(Y=U(V().m(function e(){var t,n;return V().w(function(e){for(;;)switch(e.p=e.n){case 0:return t={passwordLength:parseInt(document.getElementById("passwordLength").value),useUppercase:document.getElementById("uppercase").checked,useLowercase:document.getElementById("lowercase").checked,useNumbers:document.getElementById("numbers").checked,useSymbols:document.getElementById("symbols").checked,excludeAmbiguous:document.getElementById("excludeAmbiguous").checked,excludeSimilar:document.getElementById("excludeSimilar").checked,avoidConsecutive:document.getElementById("avoidConsecutive").checked,avoidRepeats:document.getElementById("avoidRepeats").checked,passphraseWordCount:parseInt(document.getElementById("wordCount").value),passphraseCapitalize:document.getElementById("capitalize").checked,passphraseIncludeNumber:document.getElementById("includeNumber").checked,passphraseIncludeSymbol:document.getElementById("includeSymbol").checked,passphraseSeparator:document.getElementById("separator").value,pinLength:parseInt(document.getElementById("pinLength").value),pinAvoidRepeats:document.getElementById("pinAvoidRepeats").checked,pinAvoidConsecutive:document.getElementById("pinAvoidConsecutive").checked,defaultGeneratorType:D,autoRegenerateOnOptionChange:F.autoRegenerateOnOptionChange,saveGeneratorSettings:!0},e.p=1,e.n=2,z(t);case 2:F=t,te("Settings saved!"),e.n=4;break;case 3:e.p=3,n=e.v,console.error("Error saving settings:",n),te("Error saving settings");case 4:return e.a(2)}},e,null,[[1,3]])}))).apply(this,arguments)}function ee(){F&&(F.defaultGeneratorType&&Z(F.defaultGeneratorType),document.getElementById("passwordLength").value=F.passwordLength||16,document.getElementById("lengthValue").textContent=F.passwordLength||16,document.getElementById("uppercase").checked=!1!==F.useUppercase,document.getElementById("lowercase").checked=!1!==F.useLowercase,document.getElementById("numbers").checked=!1!==F.useNumbers,document.getElementById("symbols").checked=!1!==F.useSymbols,document.getElementById("excludeAmbiguous").checked=F.excludeAmbiguous||!1,document.getElementById("excludeSimilar").checked=F.excludeSimilar||!1,document.getElementById("avoidConsecutive").checked=F.avoidConsecutive||!1,document.getElementById("avoidRepeats").checked=F.avoidRepeats||!1,document.getElementById("wordCount").value=F.passphraseWordCount||4,document.getElementById("wordCountValue").textContent=F.passphraseWordCount||4,document.getElementById("capitalize").checked=!1!==F.passphraseCapitalize,document.getElementById("includeNumber").checked=!1!==F.passphraseIncludeNumber,document.getElementById("includeSymbol").checked=!1!==F.passphraseIncludeSymbol,void 0!==F.passphraseSeparator&&(document.getElementById("separator").value=F.passphraseSeparator),document.getElementById("pinLength").value=F.pinLength||4,document.getElementById("pinLengthValue").textContent=F.pinLength||4,document.getElementById("pinAvoidRepeats").checked=F.pinAvoidRepeats||!1,document.getElementById("pinAvoidConsecutive").checked=F.pinAvoidConsecutive||!1)}function te(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2e3,n=document.querySelector(".toast");n||((n=document.createElement("div")).className="toast",document.body.appendChild(n)),n.textContent=e,n.classList.add("show"),setTimeout(function(){n.classList.remove("show")},t)}document.addEventListener("DOMContentLoaded",U(V().m(function e(){return V().w(function(e){for(;;)switch(e.n){case 0:return W(),$(),e.n=1,G();case 1:F=e.v,ee(),J();case 2:return e.a(2)}},e)})))})();