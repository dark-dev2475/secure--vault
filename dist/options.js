/*! For license information please see options.js.LICENSE.txt */
(()=>{"use strict";function e(){var n,r,o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",c=o.toStringTag||"@@toStringTag";function i(e,o,a,c){var i=o&&o.prototype instanceof s?o:s,l=Object.create(i.prototype);return t(l,"_invoke",function(e,t,o){var a,c,i,s=0,l=o||[],f=!1,d={p:0,n:0,v:n,a:p,f:p.bind(n,4),d:function(e,t){return a=e,c=0,i=n,d.n=t,u}};function p(e,t){for(c=e,i=t,r=0;!f&&s&&!o&&r<l.length;r++){var o,a=l[r],p=d.p,v=a[2];e>3?(o=v===t)&&(i=a[(c=a[4])?5:(c=3,3)],a[4]=a[5]=n):a[0]<=p&&((o=e<2&&p<a[1])?(c=0,d.v=t,d.n=a[1]):p<v&&(o=e<3||a[0]>t||t>v)&&(a[4]=e,a[5]=t,d.n=v,c=0))}if(o||e>1)return u;throw f=!0,t}return function(o,l,v){if(s>1)throw TypeError("Generator is already running");for(f&&1===l&&p(l,v),c=l,i=v;(r=c<2?n:i)||!f;){a||(c?c<3?(c>1&&(d.n=-1),p(c,i)):d.n=i:d.v=i);try{if(s=2,a){if(c||(o="next"),r=a[o]){if(!(r=r.call(a,i)))throw TypeError("iterator result is not an object");if(!r.done)return r;i=r.value,c<2&&(c=0)}else 1===c&&(r=a.return)&&r.call(a),c<2&&(i=TypeError("The iterator does not provide a '"+o+"' method"),c=1);a=n}else if((r=(f=d.n<0)?i:e.call(t,d))!==u)break}catch(e){a=n,c=1,i=e}finally{s=1}}return{value:r,done:f}}}(e,a,c),!0),l}var u={};function s(){}function l(){}function f(){}r=Object.getPrototypeOf;var d=[][a]?r(r([][a]())):(t(r={},a,function(){return this}),r),p=f.prototype=s.prototype=Object.create(d);function v(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,t(e,c,"GeneratorFunction")),e.prototype=Object.create(p),e}return l.prototype=f,t(p,"constructor",f),t(f,"constructor",l),l.displayName="GeneratorFunction",t(f,c,"GeneratorFunction"),t(p),t(p,c,"Generator"),t(p,a,function(){return this}),t(p,"toString",function(){return"[object Generator]"}),(e=function(){return{w:i,m:v}})()}function t(e,n,r,o){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}t=function(e,n,r,o){function c(n,r){t(e,n,function(e){return this._invoke(n,r,e)})}n?a?a(e,n,{value:r,enumerable:!o,configurable:!o,writable:!o}):e[n]=r:(c("next",0),c("throw",1),c("return",2))},t(e,n,r,o)}function n(e,t,n,r,o,a,c){try{var i=e[a](c),u=i.value}catch(e){return void n(e)}i.done?t(u):Promise.resolve(u).then(r,o)}function r(e){return function(){var t=this,r=arguments;return new Promise(function(o,a){var c=e.apply(t,r);function i(e){n(c,o,a,i,u,"next",e)}function u(e){n(c,o,a,i,u,"throw",e)}i(void 0)})}}var o="vault",a="settings";function c(){return i.apply(this,arguments)}function i(){return(i=r(e().m(function t(){return e().w(function(e){for(;;)if(0===e.n)return e.a(2,new Promise(function(e,t){var n=indexedDB.open("secure-shelf-db",1);n.onerror=function(e){t("Error opening database: "+e.target.error)},n.onsuccess=function(t){e(t.target.result)},n.onupgradeneeded=function(e){var t=e.target.result;t.objectStoreNames.contains(o)||t.createObjectStore(o,{keyPath:"id"}),t.objectStoreNames.contains(a)||t.createObjectStore(a,{keyPath:"id"})}}))},t)}))).apply(this,arguments)}function u(e){return s.apply(this,arguments)}function s(){return(s=r(e().m(function t(n){var r;return e().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,c();case 1:return r=e.v,e.a(2,new Promise(function(e,t){var a=r.transaction([o],"readwrite"),c=a.objectStore(o).put(n);c.onsuccess=function(){e()},c.onerror=function(e){t("Error saving to vault: "+e.target.error)},a.oncomplete=function(){r.close()}}))}},t)}))).apply(this,arguments)}function l(e){return f.apply(this,arguments)}function f(){return(f=r(e().m(function t(n){var r;return e().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,c();case 1:return r=e.v,e.a(2,new Promise(function(e,t){var a=r.transaction([o],"readonly"),c=a.objectStore(o).get(n);c.onsuccess=function(t){e(t.target.result)},c.onerror=function(e){t("Error retrieving from vault: "+e.target.error)},a.oncomplete=function(){r.close()}}))}},t)}))).apply(this,arguments)}function d(){return p.apply(this,arguments)}function p(){return(p=r(e().m(function t(){var n;return e().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,c();case 1:return n=e.v,e.a(2,new Promise(function(e,t){var r=n.transaction([o],"readonly"),a=r.objectStore(o).getAll();a.onsuccess=function(t){e(t.target.result)},a.onerror=function(e){t("Error retrieving all from vault: "+e.target.error)},r.oncomplete=function(){n.close()}}))}},t)}))).apply(this,arguments)}function v(e){return y.apply(this,arguments)}function y(){return(y=r(e().m(function t(n){var r;return e().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,c();case 1:return r=e.v,e.a(2,new Promise(function(e,t){var o=r.transaction([a],"readwrite"),c=o.objectStore(a).put(n);c.onsuccess=function(){e()},c.onerror=function(e){t("Error saving settings: "+e.target.error)},o.oncomplete=function(){r.close()}}))}},t)}))).apply(this,arguments)}function h(e){return m.apply(this,arguments)}function m(){return(m=r(e().m(function t(n){var r;return e().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,c();case 1:return r=e.v,e.a(2,new Promise(function(e,t){var o=r.transaction([a],"readonly"),c=o.objectStore(a).get(n);c.onsuccess=function(t){e(t.target.result)},c.onerror=function(e){t("Error retrieving settings: "+e.target.error)},o.oncomplete=function(){r.close()}}))}},t)}))).apply(this,arguments)}function g(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var u=r&&r.prototype instanceof i?r:i,s=Object.create(u.prototype);return w(s,"_invoke",function(n,r,o){var a,i,u,s=0,l=o||[],f=!1,d={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,n){return a=t,i=0,u=e,d.n=n,c}};function p(n,r){for(i=n,u=r,t=0;!f&&s&&!o&&t<l.length;t++){var o,a=l[t],p=d.p,v=a[2];n>3?(o=v===r)&&(u=a[(i=a[4])?5:(i=3,3)],a[4]=a[5]=e):a[0]<=p&&((o=n<2&&p<a[1])?(i=0,d.v=r,d.n=a[1]):p<v&&(o=n<3||a[0]>r||r>v)&&(a[4]=n,a[5]=r,d.n=v,i=0))}if(o||n>1)return c;throw f=!0,r}return function(o,l,v){if(s>1)throw TypeError("Generator is already running");for(f&&1===l&&p(l,v),i=l,u=v;(t=i<2?e:u)||!f;){a||(i?i<3?(i>1&&(d.n=-1),p(i,u)):d.n=u:d.v=u);try{if(s=2,a){if(i||(o="next"),t=a[o]){if(!(t=t.call(a,u)))throw TypeError("iterator result is not an object");if(!t.done)return t;u=t.value,i<2&&(i=0)}else 1===i&&(t=a.return)&&t.call(a),i<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),i=1);a=e}else if((t=(f=d.n<0)?u:n.call(r,d))!==c)break}catch(t){a=e,i=1,u=t}finally{s=1}}return{value:t,done:f}}}(n,o,a),!0),s}var c={};function i(){}function u(){}function s(){}t=Object.getPrototypeOf;var l=[][r]?t(t([][r]())):(w(t={},r,function(){return this}),t),f=s.prototype=i.prototype=Object.create(l);function d(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):(e.__proto__=s,w(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return u.prototype=s,w(f,"constructor",s),w(s,"constructor",u),u.displayName="GeneratorFunction",w(s,o,"GeneratorFunction"),w(f),w(f,o,"Generator"),w(f,r,function(){return this}),w(f,"toString",function(){return"[object Generator]"}),(g=function(){return{w:a,m:d}})()}function w(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}w=function(e,t,n,r){function a(t,n){w(e,t,function(e){return this._invoke(t,n,e)})}t?o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(a("next",0),a("throw",1),a("return",2))},w(e,t,n,r)}function b(e,t,n,r,o,a,c){try{var i=e[a](c),u=i.value}catch(e){return void n(e)}i.done?t(u):Promise.resolve(u).then(r,o)}function E(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function c(e){b(a,r,o,c,i,"next",e)}function i(e){b(a,r,o,c,i,"throw",e)}c(void 0)})}}function k(e,t){return S.apply(this,arguments)}function S(){return S=E(g().m(function e(t,n){var r,o,a,c=arguments;return g().w(function(e){for(;;)switch(e.n){case 0:return r=c.length>2&&void 0!==c[2]?c[2]:1e5,o=new TextEncoder,e.n=1,window.crypto.subtle.importKey("raw",o.encode(t),{name:"PBKDF2"},!1,["deriveKey"]);case 1:return a=e.v,e.a(2,window.crypto.subtle.deriveKey({name:"PBKDF2",salt:n,iterations:r,hash:"SHA-256"},a,{name:"AES-GCM",length:256},!1,["encrypt","decrypt"]))}},e)})),S.apply(this,arguments)}function O(e,t){return j.apply(this,arguments)}function j(){return(j=E(g().m(function e(t,n){var r,o,a;return g().w(function(e){for(;;)switch(e.n){case 0:return r=new TextEncoder,o=window.crypto.getRandomValues(new Uint8Array(12)),e.n=1,window.crypto.subtle.encrypt({name:"AES-GCM",iv:o},t,r.encode(n));case 1:return a=e.v,e.a(2,{iv:Array.from(o),ciphertext:Array.from(new Uint8Array(a))})}},e)}))).apply(this,arguments)}function I(e,t,n){return L.apply(this,arguments)}function L(){return(L=E(g().m(function e(t,n,r){var o,a,c,i;return g().w(function(e){for(;;)switch(e.n){case 0:return o=new TextDecoder,a=new Uint8Array(r),c=new Uint8Array(n),e.n=1,window.crypto.subtle.decrypt({name:"AES-GCM",iv:c},t,a);case 1:return i=e.v,e.a(2,o.decode(i))}},e)}))).apply(this,arguments)}function P(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return T(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?T(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,c=!0,i=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return c=e.done,e},e:function(e){i=!0,a=e},f:function(){try{c||null==n.return||n.return()}finally{if(i)throw a}}}}function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function x(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var u=r&&r.prototype instanceof i?r:i,s=Object.create(u.prototype);return B(s,"_invoke",function(n,r,o){var a,i,u,s=0,l=o||[],f=!1,d={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,n){return a=t,i=0,u=e,d.n=n,c}};function p(n,r){for(i=n,u=r,t=0;!f&&s&&!o&&t<l.length;t++){var o,a=l[t],p=d.p,v=a[2];n>3?(o=v===r)&&(u=a[(i=a[4])?5:(i=3,3)],a[4]=a[5]=e):a[0]<=p&&((o=n<2&&p<a[1])?(i=0,d.v=r,d.n=a[1]):p<v&&(o=n<3||a[0]>r||r>v)&&(a[4]=n,a[5]=r,d.n=v,i=0))}if(o||n>1)return c;throw f=!0,r}return function(o,l,v){if(s>1)throw TypeError("Generator is already running");for(f&&1===l&&p(l,v),i=l,u=v;(t=i<2?e:u)||!f;){a||(i?i<3?(i>1&&(d.n=-1),p(i,u)):d.n=u:d.v=u);try{if(s=2,a){if(i||(o="next"),t=a[o]){if(!(t=t.call(a,u)))throw TypeError("iterator result is not an object");if(!t.done)return t;u=t.value,i<2&&(i=0)}else 1===i&&(t=a.return)&&t.call(a),i<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),i=1);a=e}else if((t=(f=d.n<0)?u:n.call(r,d))!==c)break}catch(t){a=e,i=1,u=t}finally{s=1}}return{value:t,done:f}}}(n,o,a),!0),s}var c={};function i(){}function u(){}function s(){}t=Object.getPrototypeOf;var l=[][r]?t(t([][r]())):(B(t={},r,function(){return this}),t),f=s.prototype=i.prototype=Object.create(l);function d(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):(e.__proto__=s,B(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return u.prototype=s,B(f,"constructor",s),B(s,"constructor",u),u.displayName="GeneratorFunction",B(s,o,"GeneratorFunction"),B(f),B(f,o,"Generator"),B(f,r,function(){return this}),B(f,"toString",function(){return"[object Generator]"}),(x=function(){return{w:a,m:d}})()}function B(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}B=function(e,t,n,r){function a(t,n){B(e,t,function(e){return this._invoke(t,n,e)})}t?o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(a("next",0),a("throw",1),a("return",2))},B(e,t,n,r)}function G(e,t,n,r,o,a,c){try{var i=e[a](c),u=i.value}catch(e){return void n(e)}i.done?t(u):Promise.resolve(u).then(r,o)}function A(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function c(e){G(a,r,o,c,i,"next",e)}function i(e){G(a,r,o,c,i,"throw",e)}c(void 0)})}}var _="vault-metadata",N="vault-salt",C=null,F=!0;function U(e){return D.apply(this,arguments)}function D(){return D=A(x().m(function e(t){var n,r,o,a,c,i,s,f,d=arguments;return x().w(function(e){for(;;)switch(e.p=e.n){case 0:return n=d.length>1&&void 0!==d[1]?d[1]:5,e.p=1,e.n=2,h(N);case 2:if(r=e.v){e.n=3;break}return e.a(2,!1);case 3:return o=new Uint8Array(r.salt),e.n=4,k(t,o);case 4:return C=e.v,e.n=5,l(_);case 5:if(a=e.v){e.n=6;break}return e.a(2,!1);case 6:return e.p=6,e.n=7,I(C,a.data.iv,a.data.ciphertext);case 7:return c=e.v,JSON.parse(c),(i=JSON.parse(c)).lastAccessed=(new Date).toISOString(),e.n=8,O(C,JSON.stringify(i));case 8:return s=e.v,e.n=9,u({id:_,data:s});case 9:return F=!1,chrome.runtime.sendMessage({action:"unlockVault",lockAfterMinutes:n}),e.a(2,!0);case 10:return e.p=10,e.v,e.a(2,!1);case 11:return e.p=11,f=e.v,console.error("Error unlocking vault:",f),e.a(2,!1);case 12:return e.a(2)}},e,null,[[6,10],[1,11]])})),D.apply(this,arguments)}function M(){return F}function J(){return R.apply(this,arguments)}function R(){return(R=A(x().m(function e(){var t,n,r,o,a,c,i,u,s;return x().w(function(e){for(;;)switch(e.p=e.n){case 0:if(!F&&C){e.n=1;break}throw new Error("Vault is locked");case 1:return e.p=1,e.n=2,d();case 2:t=e.v,n=[],r=P(t),e.p=3,r.s();case 4:if((o=r.n()).done){e.n=9;break}if((a=o.value).id!==_){e.n=5;break}return e.a(3,8);case 5:return e.p=5,e.n=6,I(C,a.data.iv,a.data.ciphertext);case 6:c=e.v,n.push(JSON.parse(c)),e.n=8;break;case 7:e.p=7,i=e.v,console.error("Error decrypting credential ".concat(a.id,":"),i);case 8:e.n=4;break;case 9:e.n=11;break;case 10:e.p=10,u=e.v,r.e(u);case 11:return e.p=11,r.f(),e.f(11);case 12:return e.a(2,n);case 13:throw e.p=13,s=e.v,console.error("Error getting all credentials:",s),s;case 14:return e.a(2)}},e,null,[[5,7],[3,10,11,12],[1,13]])}))).apply(this,arguments)}function z(e,t){return K.apply(this,arguments)}function K(){return K=A(x().m(function e(t,n){var r,o,a,c,i,s,l,f,d,p,y;return x().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,U(t);case 1:if(e.v){e.n=2;break}return e.a(2,!1);case 2:return e.n=3,J();case 3:return r=e.v,o=window.crypto.getRandomValues(new Uint8Array(16)),e.n=4,k(n,o);case 4:a=e.v,c=P(r),e.p=5,c.s();case 6:if((i=c.n()).done){e.n=9;break}return s=i.value,e.n=7,O(a,JSON.stringify(s));case 7:return l=e.v,e.n=8,u({id:s.id,url:s.url,username:s.username,data:l});case 8:e.n=6;break;case 9:e.n=11;break;case 10:e.p=10,p=e.v,c.e(p);case 11:return e.p=11,c.f(),e.f(11);case 12:return f={id:_,created:(new Date).toISOString(),lastModified:(new Date).toISOString(),version:1},e.n=13,O(a,JSON.stringify(f));case 13:return d=e.v,e.n=14,u({id:_,data:d});case 14:return e.n=15,v({id:N,salt:Array.from(o)});case 15:return C=a,e.a(2,!0);case 16:return e.p=16,y=e.v,console.error("Error changing master password:",y),e.a(2,!1)}},e,null,[[5,10,11,12],[0,16]])})),K.apply(this,arguments)}function V(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var u=r&&r.prototype instanceof i?r:i,s=Object.create(u.prototype);return H(s,"_invoke",function(n,r,o){var a,i,u,s=0,l=o||[],f=!1,d={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,n){return a=t,i=0,u=e,d.n=n,c}};function p(n,r){for(i=n,u=r,t=0;!f&&s&&!o&&t<l.length;t++){var o,a=l[t],p=d.p,v=a[2];n>3?(o=v===r)&&(u=a[(i=a[4])?5:(i=3,3)],a[4]=a[5]=e):a[0]<=p&&((o=n<2&&p<a[1])?(i=0,d.v=r,d.n=a[1]):p<v&&(o=n<3||a[0]>r||r>v)&&(a[4]=n,a[5]=r,d.n=v,i=0))}if(o||n>1)return c;throw f=!0,r}return function(o,l,v){if(s>1)throw TypeError("Generator is already running");for(f&&1===l&&p(l,v),i=l,u=v;(t=i<2?e:u)||!f;){a||(i?i<3?(i>1&&(d.n=-1),p(i,u)):d.n=u:d.v=u);try{if(s=2,a){if(i||(o="next"),t=a[o]){if(!(t=t.call(a,u)))throw TypeError("iterator result is not an object");if(!t.done)return t;u=t.value,i<2&&(i=0)}else 1===i&&(t=a.return)&&t.call(a),i<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),i=1);a=e}else if((t=(f=d.n<0)?u:n.call(r,d))!==c)break}catch(t){a=e,i=1,u=t}finally{s=1}}return{value:t,done:f}}}(n,o,a),!0),s}var c={};function i(){}function u(){}function s(){}t=Object.getPrototypeOf;var l=[][r]?t(t([][r]())):(H(t={},r,function(){return this}),t),f=s.prototype=i.prototype=Object.create(l);function d(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):(e.__proto__=s,H(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return u.prototype=s,H(f,"constructor",s),H(s,"constructor",u),u.displayName="GeneratorFunction",H(s,o,"GeneratorFunction"),H(f),H(f,o,"Generator"),H(f,r,function(){return this}),H(f,"toString",function(){return"[object Generator]"}),(V=function(){return{w:a,m:d}})()}function H(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}H=function(e,t,n,r){function a(t,n){H(e,t,function(e){return this._invoke(t,n,e)})}t?o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(a("next",0),a("throw",1),a("return",2))},H(e,t,n,r)}function W(e,t,n,r,o,a,c){try{var i=e[a](c),u=i.value}catch(e){return void n(e)}i.done?t(u):Promise.resolve(u).then(r,o)}function $(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function c(e){W(a,r,o,c,i,"next",e)}function i(e){W(a,r,o,c,i,"throw",e)}c(void 0)})}}var q=document.getElementById("auto-lock-enabled"),Q=document.getElementById("auto-lock-time"),X=document.getElementById("key-stretching"),Y=document.getElementById("theme"),Z=document.getElementById("font-size"),ee=document.getElementById("font-size-value"),te=document.getElementById("autofill-enabled"),ne=document.getElementById("autofill-icon-enabled"),re=document.getElementById("autofill-confirmation"),oe=document.getElementById("default-password-length"),ae=document.getElementById("default-length-value"),ce=document.getElementById("include-uppercase"),ie=document.getElementById("include-lowercase"),ue=document.getElementById("include-numbers"),se=document.getElementById("include-symbols"),le=document.getElementById("current-password"),fe=document.getElementById("new-password"),de=document.getElementById("confirm-password"),pe=document.getElementById("change-password-button"),ve=document.getElementById("export-button"),ye=document.getElementById("import-button"),he=document.getElementById("import-file"),me=document.getElementById("clear-data-button"),ge=document.getElementById("status-message"),we="user-settings",be="generator-settings";function Ee(){return ke.apply(this,arguments)}function ke(){return(ke=$(V().m(function e(){var t,n,r,o,a;return V().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,h(we);case 1:if(r=e.v){e.n=2;break}r=Se();case 2:return t=r,e.n=3,h(be);case 3:if(o=e.v){e.n=4;break}o=Oe();case 4:n=o,q.checked=t.autoLockEnabled,Q.value=t.autoLockTime,X.value=t.keyStretchingIterations,Y.value=t.theme,Z.value=t.fontSize,ee.textContent="".concat(t.fontSize,"px"),te.checked=t.autofillEnabled,ne.checked=t.autofillIconEnabled,re.checked=t.autofillConfirmation,oe.value=n.defaultLength,ae.textContent="".concat(n.defaultLength," characters"),ce.checked=n.includeUppercase,ie.checked=n.includeLowercase,ue.checked=n.includeNumbers,se.checked=n.includeSymbols,Ge(t.theme),e.n=6;break;case 5:throw e.p=5,a=e.v,console.error("Error loading settings:",a),a;case 6:return e.a(2)}},e,null,[[0,5]])}))).apply(this,arguments)}function Se(){return{id:we,autoLockEnabled:!0,autoLockTime:5,keyStretchingIterations:1e5,theme:"light",fontSize:14,autofillEnabled:!0,autofillIconEnabled:!0,autofillConfirmation:!0}}function Oe(){return{id:be,defaultLength:16,includeUppercase:!0,includeLowercase:!0,includeNumbers:!0,includeSymbols:!0}}function je(){q.addEventListener("change",Ie),Q.addEventListener("change",Ie),X.addEventListener("change",Ie),Y.addEventListener("change",xe),Z.addEventListener("input",Ae),te.addEventListener("change",Ie),ne.addEventListener("change",Ie),re.addEventListener("change",Ie),oe.addEventListener("input",_e),ce.addEventListener("change",Pe),ie.addEventListener("change",Pe),ue.addEventListener("change",Pe),se.addEventListener("change",Pe),pe.addEventListener("click",Ne),ve.addEventListener("click",Fe),ye.addEventListener("click",function(){return he.click()}),he.addEventListener("change",De),me.addEventListener("click",Je)}function Ie(){return Le.apply(this,arguments)}function Le(){return(Le=$(V().m(function e(){var t,n;return V().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,t={id:we,autoLockEnabled:q.checked,autoLockTime:parseInt(Q.value),keyStretchingIterations:parseInt(X.value),theme:Y.value,fontSize:parseInt(Z.value),autofillEnabled:te.checked,autofillIconEnabled:ne.checked,autofillConfirmation:re.checked},e.n=1,v(t);case 1:ze("Settings saved successfully","success"),e.n=3;break;case 2:e.p=2,n=e.v,console.error("Error saving settings:",n),ze("Error saving settings","error");case 3:return e.a(2)}},e,null,[[0,2]])}))).apply(this,arguments)}function Pe(){return Te.apply(this,arguments)}function Te(){return(Te=$(V().m(function e(){var t,n;return V().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,t={id:be,defaultLength:parseInt(oe.value),includeUppercase:ce.checked,includeLowercase:ie.checked,includeNumbers:ue.checked,includeSymbols:se.checked},e.n=1,v(t);case 1:ze("Password generator settings saved","success"),e.n=3;break;case 2:e.p=2,n=e.v,console.error("Error saving generator settings:",n),ze("Error saving generator settings","error");case 3:return e.a(2)}},e,null,[[0,2]])}))).apply(this,arguments)}function xe(){return Be.apply(this,arguments)}function Be(){return(Be=$(V().m(function e(){return V().w(function(e){for(;;)switch(e.n){case 0:return Ge(Y.value),e.n=1,Ie();case 1:return e.a(2)}},e)}))).apply(this,arguments)}function Ge(e){"dark"===e||"system"===e&&window.matchMedia("(prefers-color-scheme: dark)").matches?document.body.classList.add("dark-theme"):document.body.classList.remove("dark-theme")}function Ae(){ee.textContent="".concat(Z.value,"px"),document.documentElement.style.setProperty("--font-size","".concat(Z.value,"px")),Ie()}function _e(){ae.textContent="".concat(oe.value," characters"),Pe()}function Ne(){return Ce.apply(this,arguments)}function Ce(){return(Ce=$(V().m(function e(){var t,n,r,o;return V().w(function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,t=le.value,n=fe.value,r=de.value,t){e.n=1;break}return ze("Please enter your current password","error"),e.a(2);case 1:if(!(n.length<8)){e.n=2;break}return ze("New password must be at least 8 characters","error"),e.a(2);case 2:if(n===r){e.n=3;break}return ze("New password and confirmation do not match","error"),e.a(2);case 3:return e.n=4,z(t,n);case 4:e.v?(le.value="",fe.value="",de.value="",ze("Master password changed successfully","success")):ze("Failed to change password. Current password may be incorrect.","error"),e.n=6;break;case 5:e.p=5,o=e.v,console.error("Change password error:",o),ze("Error changing password","error");case 6:return e.a(2)}},e,null,[[0,5]])}))).apply(this,arguments)}function Fe(){return Ue.apply(this,arguments)}function Ue(){return(Ue=$(V().m(function e(){var t,n,r,o,a;return V().w(function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,!M()){e.n=1;break}return ze("Please unlock your vault first","warning"),e.a(2);case 1:t={version:"1.0.0",timestamp:(new Date).toISOString(),credentials:[]},n=new Blob([JSON.stringify(t,null,2)],{type:"application/json"}),r=URL.createObjectURL(n),(o=document.createElement("a")).href=r,o.download="secure-shelf-export-".concat((new Date).toISOString().split("T")[0],".json"),o.click(),URL.revokeObjectURL(r),ze("Data exported successfully","success"),e.n=3;break;case 2:e.p=2,a=e.v,console.error("Export error:",a),ze("Error exporting data","error");case 3:return e.a(2)}},e,null,[[0,2]])}))).apply(this,arguments)}function De(e){return Me.apply(this,arguments)}function Me(){return Me=$(V().m(function e(t){var n,r,o;return V().w(function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,n=t.target.files[0]){e.n=1;break}return e.a(2);case 1:if(!M()){e.n=2;break}return ze("Please unlock your vault first","warning"),e.a(2);case 2:(r=new FileReader).onload=function(){var e=$(V().m(function e(t){var n,r;return V().w(function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,(n=JSON.parse(t.target.result)).version&&n.credentials){e.n=1;break}throw new Error("Invalid import data format");case 1:ze("Data imported successfully","success"),e.n=3;break;case 2:e.p=2,r=e.v,console.error("Import parsing error:",r),ze("Invalid import file","error");case 3:return e.a(2)}},e,null,[[0,2]])}));return function(t){return e.apply(this,arguments)}}(),r.readAsText(n),e.n=4;break;case 3:e.p=3,o=e.v,console.error("Import error:",o),ze("Error importing data","error");case 4:return e.p=4,t.target.value="",e.f(4);case 5:return e.a(2)}},e,null,[[0,3,4,5]])})),Me.apply(this,arguments)}function Je(){return Re.apply(this,arguments)}function Re(){return(Re=$(V().m(function e(){return V().w(function(e){for(;;)switch(e.n){case 0:if(confirm("WARNING: This will permanently delete all your stored passwords and settings. This action cannot be undone. Are you sure?"))try{ze("All data cleared successfully","success"),setTimeout(function(){window.location.reload()},1500)}catch(e){console.error("Clear data error:",e),ze("Error clearing data","error")}case 1:return e.a(2)}},e)}))).apply(this,arguments)}function ze(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success";ge.textContent=e,ge.className="status-message ".concat(t),ge.classList.remove("hidden"),"success"===t&&setTimeout(function(){ge.classList.add("hidden")},3e3)}document.addEventListener("DOMContentLoaded",$(V().m(function e(){var t;return V().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,Ee();case 1:je(),e.n=3;break;case 2:e.p=2,t=e.v,console.error("Error loading settings:",t),ze("Error loading settings. Please try again.","error");case 3:return e.a(2)}},e,null,[[0,2]])})))})();