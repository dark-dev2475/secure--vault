/*! For license information please see popup.js.LICENSE.txt */
(()=>{"use strict";function e(){var n,r,o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",c=o.toStringTag||"@@toStringTag";function i(e,o,a,c){var i=o&&o.prototype instanceof s?o:s,l=Object.create(i.prototype);return t(l,"_invoke",function(e,t,o){var a,c,i,s=0,l=o||[],f=!1,d={p:0,n:0,v:n,a:p,f:p.bind(n,4),d:function(e,t){return a=e,c=0,i=n,d.n=t,u}};function p(e,t){for(c=e,i=t,r=0;!f&&s&&!o&&r<l.length;r++){var o,a=l[r],p=d.p,v=a[2];e>3?(o=v===t)&&(i=a[(c=a[4])?5:(c=3,3)],a[4]=a[5]=n):a[0]<=p&&((o=e<2&&p<a[1])?(c=0,d.v=t,d.n=a[1]):p<v&&(o=e<3||a[0]>t||t>v)&&(a[4]=e,a[5]=t,d.n=v,c=0))}if(o||e>1)return u;throw f=!0,t}return function(o,l,v){if(s>1)throw TypeError("Generator is already running");for(f&&1===l&&p(l,v),c=l,i=v;(r=c<2?n:i)||!f;){a||(c?c<3?(c>1&&(d.n=-1),p(c,i)):d.n=i:d.v=i);try{if(s=2,a){if(c||(o="next"),r=a[o]){if(!(r=r.call(a,i)))throw TypeError("iterator result is not an object");if(!r.done)return r;i=r.value,c<2&&(c=0)}else 1===c&&(r=a.return)&&r.call(a),c<2&&(i=TypeError("The iterator does not provide a '"+o+"' method"),c=1);a=n}else if((r=(f=d.n<0)?i:e.call(t,d))!==u)break}catch(e){a=n,c=1,i=e}finally{s=1}}return{value:r,done:f}}}(e,a,c),!0),l}var u={};function s(){}function l(){}function f(){}r=Object.getPrototypeOf;var d=[][a]?r(r([][a]())):(t(r={},a,function(){return this}),r),p=f.prototype=s.prototype=Object.create(d);function v(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,t(e,c,"GeneratorFunction")),e.prototype=Object.create(p),e}return l.prototype=f,t(p,"constructor",f),t(f,"constructor",l),l.displayName="GeneratorFunction",t(f,c,"GeneratorFunction"),t(p),t(p,c,"Generator"),t(p,a,function(){return this}),t(p,"toString",function(){return"[object Generator]"}),(e=function(){return{w:i,m:v}})()}function t(e,n,r,o){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}t=function(e,n,r,o){function c(n,r){t(e,n,function(e){return this._invoke(n,r,e)})}n?a?a(e,n,{value:r,enumerable:!o,configurable:!o,writable:!o}):e[n]=r:(c("next",0),c("throw",1),c("return",2))},t(e,n,r,o)}function n(e,t,n,r,o,a,c){try{var i=e[a](c),u=i.value}catch(e){return void n(e)}i.done?t(u):Promise.resolve(u).then(r,o)}function r(e){return function(){var t=this,r=arguments;return new Promise(function(o,a){var c=e.apply(t,r);function i(e){n(c,o,a,i,u,"next",e)}function u(e){n(c,o,a,i,u,"throw",e)}i(void 0)})}}function o(e,t){return a.apply(this,arguments)}function a(){return a=r(e().m(function t(n,r){var o,a,c,i=arguments;return e().w(function(e){for(;;)switch(e.n){case 0:return o=i.length>2&&void 0!==i[2]?i[2]:1e5,a=new TextEncoder,e.n=1,window.crypto.subtle.importKey("raw",a.encode(n),{name:"PBKDF2"},!1,["deriveKey"]);case 1:return c=e.v,e.a(2,window.crypto.subtle.deriveKey({name:"PBKDF2",salt:r,iterations:o,hash:"SHA-256"},c,{name:"AES-GCM",length:256},!1,["encrypt","decrypt"]))}},t)})),a.apply(this,arguments)}function c(e,t){return i.apply(this,arguments)}function i(){return(i=r(e().m(function t(n,r){var o,a,c;return e().w(function(e){for(;;)switch(e.n){case 0:return o=new TextEncoder,a=window.crypto.getRandomValues(new Uint8Array(12)),e.n=1,window.crypto.subtle.encrypt({name:"AES-GCM",iv:a},n,o.encode(r));case 1:return c=e.v,e.a(2,{iv:Array.from(a),ciphertext:Array.from(new Uint8Array(c))})}},t)}))).apply(this,arguments)}function u(e,t,n){return s.apply(this,arguments)}function s(){return(s=r(e().m(function t(n,r,o){var a,c,i,u;return e().w(function(e){for(;;)switch(e.n){case 0:return a=new TextDecoder,c=new Uint8Array(o),i=new Uint8Array(r),e.n=1,window.crypto.subtle.decrypt({name:"AES-GCM",iv:i},n,c);case 1:return u=e.v,e.a(2,a.decode(u))}},t)}))).apply(this,arguments)}function l(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var u=r&&r.prototype instanceof i?r:i,s=Object.create(u.prototype);return f(s,"_invoke",function(n,r,o){var a,i,u,s=0,l=o||[],f=!1,d={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,n){return a=t,i=0,u=e,d.n=n,c}};function p(n,r){for(i=n,u=r,t=0;!f&&s&&!o&&t<l.length;t++){var o,a=l[t],p=d.p,v=a[2];n>3?(o=v===r)&&(u=a[(i=a[4])?5:(i=3,3)],a[4]=a[5]=e):a[0]<=p&&((o=n<2&&p<a[1])?(i=0,d.v=r,d.n=a[1]):p<v&&(o=n<3||a[0]>r||r>v)&&(a[4]=n,a[5]=r,d.n=v,i=0))}if(o||n>1)return c;throw f=!0,r}return function(o,l,v){if(s>1)throw TypeError("Generator is already running");for(f&&1===l&&p(l,v),i=l,u=v;(t=i<2?e:u)||!f;){a||(i?i<3?(i>1&&(d.n=-1),p(i,u)):d.n=u:d.v=u);try{if(s=2,a){if(i||(o="next"),t=a[o]){if(!(t=t.call(a,u)))throw TypeError("iterator result is not an object");if(!t.done)return t;u=t.value,i<2&&(i=0)}else 1===i&&(t=a.return)&&t.call(a),i<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),i=1);a=e}else if((t=(f=d.n<0)?u:n.call(r,d))!==c)break}catch(t){a=e,i=1,u=t}finally{s=1}}return{value:t,done:f}}}(n,o,a),!0),s}var c={};function i(){}function u(){}function s(){}t=Object.getPrototypeOf;var d=[][r]?t(t([][r]())):(f(t={},r,function(){return this}),t),p=s.prototype=i.prototype=Object.create(d);function v(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):(e.__proto__=s,f(e,o,"GeneratorFunction")),e.prototype=Object.create(p),e}return u.prototype=s,f(p,"constructor",s),f(s,"constructor",u),u.displayName="GeneratorFunction",f(s,o,"GeneratorFunction"),f(p),f(p,o,"Generator"),f(p,r,function(){return this}),f(p,"toString",function(){return"[object Generator]"}),(l=function(){return{w:a,m:v}})()}function f(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}f=function(e,t,n,r){function a(t,n){f(e,t,function(e){return this._invoke(t,n,e)})}t?o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(a("next",0),a("throw",1),a("return",2))},f(e,t,n,r)}function d(e,t,n,r,o,a,c){try{var i=e[a](c),u=i.value}catch(e){return void n(e)}i.done?t(u):Promise.resolve(u).then(r,o)}function p(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function c(e){d(a,r,o,c,i,"next",e)}function i(e){d(a,r,o,c,i,"throw",e)}c(void 0)})}}var v="vault",y="settings";function m(){return h.apply(this,arguments)}function h(){return(h=p(l().m(function e(){return l().w(function(e){for(;;)if(0===e.n)return e.a(2,new Promise(function(e,t){var n=indexedDB.open("secure-shelf-db",1);n.onerror=function(e){t("Error opening database: "+e.target.error)},n.onsuccess=function(t){e(t.target.result)},n.onupgradeneeded=function(e){var t=e.target.result;t.objectStoreNames.contains(v)||t.createObjectStore(v,{keyPath:"id"}),t.objectStoreNames.contains(y)||t.createObjectStore(y,{keyPath:"id"})}}))},e)}))).apply(this,arguments)}function b(e){return w.apply(this,arguments)}function w(){return(w=p(l().m(function e(t){var n;return l().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,m();case 1:return n=e.v,e.a(2,new Promise(function(e,r){var o=n.transaction([v],"readwrite"),a=o.objectStore(v).put(t);a.onsuccess=function(){e()},a.onerror=function(e){r("Error saving to vault: "+e.target.error)},o.oncomplete=function(){n.close()}}))}},e)}))).apply(this,arguments)}function g(e){return E.apply(this,arguments)}function E(){return(E=p(l().m(function e(t){var n;return l().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,m();case 1:return n=e.v,e.a(2,new Promise(function(e,r){var o=n.transaction([v],"readonly"),a=o.objectStore(v).get(t);a.onsuccess=function(t){e(t.target.result)},a.onerror=function(e){r("Error retrieving from vault: "+e.target.error)},o.oncomplete=function(){n.close()}}))}},e)}))).apply(this,arguments)}function O(){return k.apply(this,arguments)}function k(){return(k=p(l().m(function e(){var t;return l().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,m();case 1:return t=e.v,e.a(2,new Promise(function(e,n){var r=t.transaction([v],"readonly"),o=r.objectStore(v).getAll();o.onsuccess=function(t){e(t.target.result)},o.onerror=function(e){n("Error retrieving all from vault: "+e.target.error)},r.oncomplete=function(){t.close()}}))}},e)}))).apply(this,arguments)}function S(e){return j.apply(this,arguments)}function j(){return(j=p(l().m(function e(t){var n;return l().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,m();case 1:return n=e.v,e.a(2,new Promise(function(e,r){var o=n.transaction([v],"readwrite"),a=o.objectStore(v).delete(t);a.onsuccess=function(){e()},a.onerror=function(e){r("Error removing from vault: "+e.target.error)},o.oncomplete=function(){n.close()}}))}},e)}))).apply(this,arguments)}function I(e){return x.apply(this,arguments)}function x(){return(x=p(l().m(function e(t){var n;return l().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,m();case 1:return n=e.v,e.a(2,new Promise(function(e,r){var o=n.transaction([y],"readwrite"),a=o.objectStore(y).put(t);a.onsuccess=function(){e()},a.onerror=function(e){r("Error saving settings: "+e.target.error)},o.oncomplete=function(){n.close()}}))}},e)}))).apply(this,arguments)}function P(e){return B.apply(this,arguments)}function B(){return(B=p(l().m(function e(t){var n;return l().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,m();case 1:return n=e.v,e.a(2,new Promise(function(e,r){var o=n.transaction([y],"readonly"),a=o.objectStore(y).get(t);a.onsuccess=function(t){e(t.target.result)},a.onerror=function(e){r("Error retrieving settings: "+e.target.error)},o.oncomplete=function(){n.close()}}))}},e)}))).apply(this,arguments)}function C(e){return C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},C(e)}function L(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return A(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?A(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,c=!0,i=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return c=e.done,e},e:function(e){i=!0,a=e},f:function(){try{c||null==n.return||n.return()}finally{if(i)throw a}}}}function A(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function G(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(Object(n),!0).forEach(function(t){_(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function _(e,t,n){return(t=function(e){var t=function(e){if("object"!=C(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=C(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==C(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function D(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var u=r&&r.prototype instanceof i?r:i,s=Object.create(u.prototype);return F(s,"_invoke",function(n,r,o){var a,i,u,s=0,l=o||[],f=!1,d={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,n){return a=t,i=0,u=e,d.n=n,c}};function p(n,r){for(i=n,u=r,t=0;!f&&s&&!o&&t<l.length;t++){var o,a=l[t],p=d.p,v=a[2];n>3?(o=v===r)&&(u=a[(i=a[4])?5:(i=3,3)],a[4]=a[5]=e):a[0]<=p&&((o=n<2&&p<a[1])?(i=0,d.v=r,d.n=a[1]):p<v&&(o=n<3||a[0]>r||r>v)&&(a[4]=n,a[5]=r,d.n=v,i=0))}if(o||n>1)return c;throw f=!0,r}return function(o,l,v){if(s>1)throw TypeError("Generator is already running");for(f&&1===l&&p(l,v),i=l,u=v;(t=i<2?e:u)||!f;){a||(i?i<3?(i>1&&(d.n=-1),p(i,u)):d.n=u:d.v=u);try{if(s=2,a){if(i||(o="next"),t=a[o]){if(!(t=t.call(a,u)))throw TypeError("iterator result is not an object");if(!t.done)return t;u=t.value,i<2&&(i=0)}else 1===i&&(t=a.return)&&t.call(a),i<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),i=1);a=e}else if((t=(f=d.n<0)?u:n.call(r,d))!==c)break}catch(t){a=e,i=1,u=t}finally{s=1}}return{value:t,done:f}}}(n,o,a),!0),s}var c={};function i(){}function u(){}function s(){}t=Object.getPrototypeOf;var l=[][r]?t(t([][r]())):(F(t={},r,function(){return this}),t),f=s.prototype=i.prototype=Object.create(l);function d(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):(e.__proto__=s,F(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return u.prototype=s,F(f,"constructor",s),F(s,"constructor",u),u.displayName="GeneratorFunction",F(s,o,"GeneratorFunction"),F(f),F(f,o,"Generator"),F(f,r,function(){return this}),F(f,"toString",function(){return"[object Generator]"}),(D=function(){return{w:a,m:d}})()}function F(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}F=function(e,t,n,r){function a(t,n){F(e,t,function(e){return this._invoke(t,n,e)})}t?o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(a("next",0),a("throw",1),a("return",2))},F(e,t,n,r)}function N(e,t,n,r,o,a,c){try{var i=e[a](c),u=i.value}catch(e){return void n(e)}i.done?t(u):Promise.resolve(u).then(r,o)}function U(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function c(e){N(a,r,o,c,i,"next",e)}function i(e){N(a,r,o,c,i,"throw",e)}c(void 0)})}}var R="vault-metadata",M="vault-salt",V=null,J=!0,q=null;function z(e){return K.apply(this,arguments)}function K(){return(K=U(D().m(function e(t){var n,r,a,i;return D().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,n=window.crypto.getRandomValues(new Uint8Array(16)),e.n=1,I({id:M,salt:Array.from(n)});case 1:return r={id:R,created:(new Date).toISOString(),lastModified:(new Date).toISOString(),version:1},e.n=2,o(t,n);case 2:return V=e.v,e.n=3,c(V,JSON.stringify(r));case 3:return a=e.v,e.n=4,b({id:R,data:a});case 4:return J=!1,e.a(2,!0);case 5:return e.p=5,i=e.v,console.error("Error initializing vault:",i),e.a(2,!1)}},e,null,[[0,5]])}))).apply(this,arguments)}function $(){return H.apply(this,arguments)}function H(){return(H=U(D().m(function e(){var t;return D().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,g(R);case 1:return t=e.v,e.a(2,!!t);case 2:return e.p=2,e.v,e.a(2,!1)}},e,null,[[0,2]])}))).apply(this,arguments)}function Z(e){return W.apply(this,arguments)}function W(){return W=U(D().m(function e(t){var n,r,a,i,s,l,f,d,p=arguments;return D().w(function(e){for(;;)switch(e.p=e.n){case 0:return n=p.length>1&&void 0!==p[1]?p[1]:5,e.p=1,e.n=2,P(M);case 2:if(r=e.v){e.n=3;break}return e.a(2,!1);case 3:return a=new Uint8Array(r.salt),e.n=4,o(t,a);case 4:return V=e.v,e.n=5,g(R);case 5:if(i=e.v){e.n=6;break}return e.a(2,!1);case 6:return e.p=6,e.n=7,u(V,i.data.iv,i.data.ciphertext);case 7:return s=e.v,JSON.parse(s),(l=JSON.parse(s)).lastAccessed=(new Date).toISOString(),e.n=8,c(V,JSON.stringify(l));case 8:return f=e.v,e.n=9,b({id:R,data:f});case 9:return J=!1,n>0&&(q&&clearTimeout(q),q=setTimeout(function(){Q()},60*n*1e3)),e.a(2,!0);case 10:return e.p=10,e.v,e.a(2,!1);case 11:return e.p=11,d=e.v,console.error("Error unlocking vault:",d),e.a(2,!1);case 12:return e.a(2)}},e,null,[[6,10],[1,11]])})),W.apply(this,arguments)}function Q(){V=null,J=!0,q&&(clearTimeout(q),q=null)}function X(e){return Y.apply(this,arguments)}function Y(){return(Y=U(D().m(function e(t){var n,r;return D().w(function(e){for(;;)switch(e.p=e.n){case 0:if(!J&&V){e.n=1;break}throw new Error("Vault is locked");case 1:return e.p=1,t.id||(t.id="cred-"+Date.now()+"-"+Math.floor(1e3*Math.random())),t.createdAt=(new Date).toISOString(),t.updatedAt=(new Date).toISOString(),e.n=2,c(V,JSON.stringify(t));case 2:return n=e.v,e.n=3,b({id:t.id,url:t.url,username:t.username,data:n});case 3:return e.a(2,t.id);case 4:throw e.p=4,r=e.v,console.error("Error adding credential:",r),r;case 5:return e.a(2)}},e,null,[[1,4]])}))).apply(this,arguments)}function ee(e,t){return te.apply(this,arguments)}function te(){return(te=U(D().m(function e(t,n){var r,o,a,i,s,l;return D().w(function(e){for(;;)switch(e.p=e.n){case 0:if(!J&&V){e.n=1;break}throw new Error("Vault is locked");case 1:return e.p=1,e.n=2,g(t);case 2:if(r=e.v){e.n=3;break}return e.a(2,!1);case 3:return e.n=4,u(V,r.data.iv,r.data.ciphertext);case 4:return o=e.v,a=JSON.parse(o),i=G(G(G({},a),n),{},{updatedAt:(new Date).toISOString()}),e.n=5,c(V,JSON.stringify(i));case 5:return s=e.v,e.n=6,b({id:t,url:i.url,username:i.username,data:s});case 6:return e.a(2,!0);case 7:throw e.p=7,l=e.v,console.error("Error updating credential:",l),l;case 8:return e.a(2)}},e,null,[[1,7]])}))).apply(this,arguments)}function ne(e){return re.apply(this,arguments)}function re(){return(re=U(D().m(function e(t){var n,r,o;return D().w(function(e){for(;;)switch(e.p=e.n){case 0:if(!J&&V){e.n=1;break}throw new Error("Vault is locked");case 1:return e.p=1,e.n=2,g(t);case 2:if(n=e.v){e.n=3;break}return e.a(2,null);case 3:return e.n=4,u(V,n.data.iv,n.data.ciphertext);case 4:return r=e.v,e.a(2,JSON.parse(r));case 5:throw e.p=5,o=e.v,console.error("Error getting credential:",o),o;case 6:return e.a(2)}},e,null,[[1,5]])}))).apply(this,arguments)}function oe(){return ae.apply(this,arguments)}function ae(){return(ae=U(D().m(function e(){var t,n,r,o,a,c,i,s,l;return D().w(function(e){for(;;)switch(e.p=e.n){case 0:if(!J&&V){e.n=1;break}throw new Error("Vault is locked");case 1:return e.p=1,e.n=2,O();case 2:t=e.v,n=[],r=L(t),e.p=3,r.s();case 4:if((o=r.n()).done){e.n=9;break}if((a=o.value).id!==R){e.n=5;break}return e.a(3,8);case 5:return e.p=5,e.n=6,u(V,a.data.iv,a.data.ciphertext);case 6:c=e.v,n.push(JSON.parse(c)),e.n=8;break;case 7:e.p=7,i=e.v,console.error("Error decrypting credential ".concat(a.id,":"),i);case 8:e.n=4;break;case 9:e.n=11;break;case 10:e.p=10,s=e.v,r.e(s);case 11:return e.p=11,r.f(),e.f(11);case 12:return e.a(2,n);case 13:throw e.p=13,l=e.v,console.error("Error getting all credentials:",l),l;case 14:return e.a(2)}},e,null,[[5,7],[3,10,11,12],[1,13]])}))).apply(this,arguments)}function ce(e){return ie.apply(this,arguments)}function ie(){return(ie=U(D().m(function e(t){var n;return D().w(function(e){for(;;)switch(e.p=e.n){case 0:if(!J&&V){e.n=1;break}throw new Error("Vault is locked");case 1:return e.p=1,e.n=2,S(t);case 2:return e.a(2,!0);case 3:return e.p=3,n=e.v,console.error("Error deleting credential:",n),e.a(2,!1)}},e,null,[[1,3]])}))).apply(this,arguments)}function ue(e){return ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ue(e)}function se(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return le(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?le(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,c=!0,i=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return c=e.done,e},e:function(e){i=!0,a=e},f:function(){try{c||null==n.return||n.return()}finally{if(i)throw a}}}}function le(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function fe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function de(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fe(Object(n),!0).forEach(function(t){pe(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fe(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function pe(e,t,n){return(t=function(e){var t=function(e){if("object"!=ue(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=ue(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==ue(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ve(e,t,n,r){var o=new Uint32Array(2*e);window.crypto.getRandomValues(o);for(var a="",c="",i=new Set,u=0,s=0;s<e;s++){var l=void 0,f=0;do{var d=o[u++];if(u>=o.length&&(window.crypto.getRandomValues(o),u=0),l=t[d%t.length],f++,!(n&&l===c||r&&i.has(l))&&f>=10)break}while(n&&l===c||r&&i.has(l));a+=l,c=l,i.add(l)}return a}function ye(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function me(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var u=r&&r.prototype instanceof i?r:i,s=Object.create(u.prototype);return he(s,"_invoke",function(n,r,o){var a,i,u,s=0,l=o||[],f=!1,d={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,n){return a=t,i=0,u=e,d.n=n,c}};function p(n,r){for(i=n,u=r,t=0;!f&&s&&!o&&t<l.length;t++){var o,a=l[t],p=d.p,v=a[2];n>3?(o=v===r)&&(u=a[(i=a[4])?5:(i=3,3)],a[4]=a[5]=e):a[0]<=p&&((o=n<2&&p<a[1])?(i=0,d.v=r,d.n=a[1]):p<v&&(o=n<3||a[0]>r||r>v)&&(a[4]=n,a[5]=r,d.n=v,i=0))}if(o||n>1)return c;throw f=!0,r}return function(o,l,v){if(s>1)throw TypeError("Generator is already running");for(f&&1===l&&p(l,v),i=l,u=v;(t=i<2?e:u)||!f;){a||(i?i<3?(i>1&&(d.n=-1),p(i,u)):d.n=u:d.v=u);try{if(s=2,a){if(i||(o="next"),t=a[o]){if(!(t=t.call(a,u)))throw TypeError("iterator result is not an object");if(!t.done)return t;u=t.value,i<2&&(i=0)}else 1===i&&(t=a.return)&&t.call(a),i<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),i=1);a=e}else if((t=(f=d.n<0)?u:n.call(r,d))!==c)break}catch(t){a=e,i=1,u=t}finally{s=1}}return{value:t,done:f}}}(n,o,a),!0),s}var c={};function i(){}function u(){}function s(){}t=Object.getPrototypeOf;var l=[][r]?t(t([][r]())):(he(t={},r,function(){return this}),t),f=s.prototype=i.prototype=Object.create(l);function d(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):(e.__proto__=s,he(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return u.prototype=s,he(f,"constructor",s),he(s,"constructor",u),u.displayName="GeneratorFunction",he(s,o,"GeneratorFunction"),he(f),he(f,o,"Generator"),he(f,r,function(){return this}),he(f,"toString",function(){return"[object Generator]"}),(me=function(){return{w:a,m:d}})()}function he(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}he=function(e,t,n,r){function a(t,n){he(e,t,function(e){return this._invoke(t,n,e)})}t?o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(a("next",0),a("throw",1),a("return",2))},he(e,t,n,r)}function be(e,t,n,r,o,a,c){try{var i=e[a](c),u=i.value}catch(e){return void n(e)}i.done?t(u):Promise.resolve(u).then(r,o)}function we(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function c(e){be(a,r,o,c,i,"next",e)}function i(e){be(a,r,o,c,i,"throw",e)}c(void 0)})}}var ge={auth:document.getElementById("auth-screen"),dashboard:document.getElementById("dashboard-screen"),detail:document.getElementById("detail-screen"),form:document.getElementById("credential-form-screen"),passwordGenerator:document.getElementById("generate-password-screen")},Ee=document.getElementById("login-tab"),Oe=document.getElementById("setup-tab"),ke=document.getElementById("login-form"),Se=document.getElementById("setup-form"),je=document.getElementById("master-password"),Ie=document.getElementById("new-master-password"),xe=document.getElementById("confirm-master-password"),Pe=document.getElementById("unlock-button"),Be=document.getElementById("setup-button"),Ce=document.getElementById("login-error"),Le=document.getElementById("setup-error"),Ae=document.getElementById("credentials-list"),Te=document.getElementById("search-input"),Ge=document.getElementById("add-credential-button"),_e=document.getElementById("options-button"),De=document.getElementById("lock-button"),Fe=document.getElementById("empty-state"),Ne=document.getElementById("back-to-list-button"),Ue=document.getElementById("detail-url"),Re=document.getElementById("username-value"),Me=document.getElementById("password-value"),Ve=document.getElementById("detail-notes"),Je=document.getElementById("copy-username"),qe=document.getElementById("copy-password"),ze=document.getElementById("show-password"),Ke=document.getElementById("edit-credential-button"),$e=document.getElementById("delete-credential-button"),He=document.getElementById("form-title"),Ze=document.getElementById("cancel-form-button"),We=document.getElementById("credential-url"),Qe=document.getElementById("credential-name"),Xe=document.getElementById("credential-username"),Ye=document.getElementById("credential-password"),et=document.getElementById("credential-notes"),tt=document.getElementById("generate-password"),nt=document.getElementById("toggle-password"),rt=document.getElementById("save-credential-button"),ot=document.getElementById("form-error"),at=document.getElementById("close-generator-button"),ct=document.getElementById("password-length"),it=document.getElementById("length-value"),ut=document.getElementById("include-uppercase"),st=document.getElementById("include-lowercase"),lt=document.getElementById("include-numbers"),ft=document.getElementById("include-symbols"),dt=document.getElementById("generated-password"),pt=document.getElementById("copy-generated"),vt=document.getElementById("regenerate-button"),yt=document.getElementById("use-password-button"),mt=[],ht=null,bt=!1;function wt(){return gt.apply(this,arguments)}function gt(){return(gt=we(me().m(function e(){var t;return me().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,It(ge.dashboard),e.n=1,Et();case 1:e.n=3;break;case 2:e.p=2,t=e.v,console.error("Dashboard loading error:",t);case 3:return e.a(2)}},e,null,[[0,2]])}))).apply(this,arguments)}function Et(){return Ot.apply(this,arguments)}function Ot(){return(Ot=we(me().m(function e(){var t;return me().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,oe();case 1:for(mt=e.v;Ae.firstChild;)Ae.removeChild(Ae.firstChild);if(0!==mt.length){e.n=2;break}return Ae.appendChild(Fe),e.a(2);case 2:Fe.remove(),mt.forEach(function(e){var t=document.createElement("div");t.className="credential-item",t.dataset.id=e.id;var n=document.createElement("div");n.className="title",n.textContent=e.name||e.url;var r=document.createElement("div");r.className="username",r.textContent=e.username||"",t.appendChild(n),t.appendChild(r),t.addEventListener("click",function(){kt(e.id)}),Ae.appendChild(t)}),e.n=4;break;case 3:e.p=3,t=e.v,console.error("Credentials loading error:",t);case 4:return e.a(2)}},e,null,[[0,3]])}))).apply(this,arguments)}function kt(e){return St.apply(this,arguments)}function St(){return(St=we(me().m(function e(t){var n,r;return me().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,ht=t,e.n=1,ne(t);case 1:if(n=e.v){e.n=2;break}return e.a(2);case 2:Ue.textContent=n.url||"",Re.textContent=n.username||"",Me.textContent="••••••••",Me.dataset.password=n.password||"",Ve.textContent=n.notes||"",It(ge.detail),e.n=4;break;case 3:e.p=3,r=e.v,console.error("Detail view error:",r);case 4:return e.a(2)}},e,null,[[0,3]])}))).apply(this,arguments)}function jt(){var e=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=de(de({},{length:16,uppercase:!0,lowercase:!0,numbers:!0,symbols:!0,excludeAmbiguous:!1,excludeSimilar:!1,required:"",excluded:"",noConsecutive:!1,noRepeats:!1}),e);t.uppercase||t.lowercase||t.numbers||t.symbols||(t.lowercase=!0);var n="";if(t.uppercase&&(n+="ABCDEFGHIJKLMNOPQRSTUVWXYZ"),t.lowercase&&(n+="abcdefghijklmnopqrstuvwxyz"),t.numbers&&(n+="0123456789"),t.symbols&&(n+="!@#$%^&*()-_=+[]{}|;:,.<>?/"),t.excluded){var r,o=se(t.excluded);try{for(o.s();!(r=o.n()).done;){var a=r.value;n=n.replace(new RegExp(ye(a),"g"),"")}}catch(e){o.e(e)}finally{o.f()}}if(t.excludeAmbiguous){var c,i=se("1lI0O{}[]()/'\"`~,;:.<>");try{for(i.s();!(c=i.n()).done;){var u=c.value;n=n.replace(new RegExp(ye(u),"g"),"")}}catch(e){i.e(e)}finally{i.f()}}if(t.excludeSimilar){var s,l=se("il1Lo0O");try{for(l.s();!(s=l.n()).done;){var f=s.value;n=n.replace(new RegExp(ye(f),"g"),"")}}catch(e){l.e(e)}finally{l.f()}}if(!n)throw new Error("No characters available after applying exclusions");for(var d="",p=0;p<100;){if(p++,d=ve(t.length,n,t.noConsecutive,t.noRepeats),t.required){var v,y=!0,m=se(t.required);try{for(m.s();!(v=m.n()).done;){var h=v.value;if(!d.includes(h)){y=!1;break}}}catch(e){m.e(e)}finally{m.f()}if(!y)continue}var b=!0;if(t.uppercase&&!/[A-Z]/.test(d)&&(b=!1),t.lowercase&&!/[a-z]/.test(d)&&(b=!1),t.numbers&&!/[0-9]/.test(d)&&(b=!1),t.symbols&&!/[^A-Za-z0-9]/.test(d)&&(b=!1),b)break}return p>=100?function(e){var t="";e.uppercase&&(t+="ABCDEFGHJKLMNPQRSTUVWXYZ"),e.lowercase&&(t+="abcdefghijkmnopqrstuvwxyz"),e.numbers&&(t+="23456789"),e.symbols&&(t+="!@#$%^&*()-_=+"),t||(t="abcdefghijkmnopqrstuvwxyz23456789");var n=new Uint32Array(e.length);window.crypto.getRandomValues(n);for(var r="",o=0;o<e.length;o++)r+=t[n[o]%t.length];return r}(t):d}({length:parseInt(ct.value),uppercase:ut.checked,lowercase:st.checked,numbers:lt.checked,symbols:ft.checked});dt.value=e}function It(e){Object.values(ge).forEach(function(e){e.classList.remove("active")}),e.classList.add("active")}function xt(e,t){e.textContent=t,e.classList.remove("hidden")}function Pt(e){navigator.clipboard.writeText(e).catch(function(e){console.error("Could not copy text: ",e)})}function Bt(e){chrome.tabs?chrome.tabs.query({active:!0,currentWindow:!0},function(t){e(t[0])}):e(null)}document.addEventListener("DOMContentLoaded",we(me().m(function e(){var t;return me().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,$();case 1:e.v?(Ee.classList.add("active"),Oe.classList.remove("active"),ke.classList.remove("hidden"),Se.classList.add("hidden")):(Ee.classList.remove("active"),Oe.classList.add("active"),ke.classList.add("hidden"),Se.classList.remove("hidden")),Bt(function(){var e=we(me().m(function e(t){return me().w(function(e){for(;;)switch(e.n){case 0:t&&t.url&&(We.value=t.url);case 1:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}()),e.n=3;break;case 2:e.p=2,t=e.v,console.error("Initialization error:",t),xt(Ce,"Failed to initialize the application.");case 3:return e.a(2)}},e,null,[[0,2]])}))),Ee.addEventListener("click",function(){Ee.classList.add("active"),Oe.classList.remove("active"),ke.classList.remove("hidden"),Se.classList.add("hidden")}),Oe.addEventListener("click",function(){Ee.classList.remove("active"),Oe.classList.add("active"),ke.classList.add("hidden"),Se.classList.remove("hidden")}),Pe.addEventListener("click",we(me().m(function e(){var t,n;return me().w(function(e){for(;;)switch(e.p=e.n){case 0:if(t=je.value){e.n=1;break}return xt(Ce,"Please enter your master password."),e.a(2);case 1:return e.p=1,e.n=2,Z(t);case 2:if(!e.v){e.n=4;break}return je.value="",Ce.classList.add("hidden"),e.n=3,wt();case 3:e.n=5;break;case 4:xt(Ce,"Incorrect master password.");case 5:e.n=7;break;case 6:e.p=6,n=e.v,console.error("Unlock error:",n),xt(Ce,"Failed to unlock the vault.");case 7:return e.a(2)}},e,null,[[1,6]])}))),Be.addEventListener("click",we(me().m(function e(){var t,n,r;return me().w(function(e){for(;;)switch(e.p=e.n){case 0:if(t=Ie.value,n=xe.value,t){e.n=1;break}return xt(Le,"Please enter a master password."),e.a(2);case 1:if(!(t.length<8)){e.n=2;break}return xt(Le,"Master password must be at least 8 characters."),e.a(2);case 2:if(t===n){e.n=3;break}return xt(Le,"Passwords do not match."),e.a(2);case 3:return e.p=3,e.n=4,z(t);case 4:if(!e.v){e.n=6;break}return Ie.value="",xe.value="",Le.classList.add("hidden"),e.n=5,wt();case 5:e.n=7;break;case 6:xt(Le,"Failed to create the vault.");case 7:e.n=9;break;case 8:e.p=8,r=e.v,console.error("Setup error:",r),xt(Le,"Failed to create the vault.");case 9:return e.a(2)}},e,null,[[3,8]])}))),Te.addEventListener("input",function(){var e=Te.value.toLowerCase();Ae.querySelectorAll(".credential-item").forEach(function(t){var n=t.querySelector(".title").textContent.toLowerCase(),r=t.querySelector(".username").textContent.toLowerCase();n.includes(e)||r.includes(e)?t.style.display="block":t.style.display="none"})}),ze.addEventListener("click",function(){"••••••••"===Me.textContent?(Me.textContent=Me.dataset.password,ze.textContent="Hide"):(Me.textContent="••••••••",ze.textContent="Show")}),Je.addEventListener("click",function(){Pt(Re.textContent),Je.textContent="Copied!",setTimeout(function(){Je.textContent="Copy"},1500)}),qe.addEventListener("click",function(){Pt(Me.dataset.password),qe.textContent="Copied!",setTimeout(function(){qe.textContent="Copy"},1500)}),Ke.addEventListener("click",function(){var e;bt=!0,He.textContent="Edit Credential",We.value=Ue.textContent,Qe.value=(null===(e=mt.find(function(e){return e.id===ht}))||void 0===e?void 0:e.name)||"",Xe.value=Re.textContent,Ye.value=Me.dataset.password,et.value=Ve.textContent,It(ge.form)}),$e.addEventListener("click",we(me().m(function e(){var t;return me().w(function(e){for(;;)switch(e.p=e.n){case 0:if(!confirm("Are you sure you want to delete this credential?")){e.n=5;break}return e.p=1,e.n=2,ce(ht);case 2:return Ne.click(),e.n=3,Et();case 3:e.n=5;break;case 4:e.p=4,t=e.v,console.error("Delete error:",t);case 5:return e.a(2)}},e,null,[[1,4]])}))),Ne.addEventListener("click",function(){It(ge.dashboard)}),Ge.addEventListener("click",function(){bt=!1,He.textContent="Add Credential",We.value="",Qe.value="",Xe.value="",Ye.value="",et.value="",Bt(function(e){e&&e.url&&(We.value=e.url)}),It(ge.form)}),Ze.addEventListener("click",function(){It(bt?ge.detail:ge.dashboard)}),rt.addEventListener("click",we(me().m(function e(){var t,n,r,o,a,c,i;return me().w(function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,t=We.value,n=Qe.value,r=Xe.value,o=Ye.value,a=et.value,t){e.n=1;break}return xt(ot,"Please enter a URL."),e.a(2);case 1:if(o){e.n=2;break}return xt(ot,"Please enter a password."),e.a(2);case 2:if(c={url:t,name:n,username:r,password:o,notes:a},!bt){e.n=4;break}return e.n=3,ee(ht,c);case 3:e.n=5;break;case 4:return e.n=5,X(c);case 5:return It(ge.dashboard),e.n=6,Et();case 6:e.n=8;break;case 7:e.p=7,i=e.v,console.error("Save error:",i),xt(ot,"Failed to save credential.");case 8:return e.a(2)}},e,null,[[0,7]])}))),tt.addEventListener("click",function(){It(ge.passwordGenerator),jt()}),nt.addEventListener("click",function(){"password"===Ye.type?(Ye.type="text",nt.textContent="🔒"):(Ye.type="password",nt.textContent="👁️")}),De.addEventListener("click",function(){Q(),It(ge.auth)}),_e.addEventListener("click",function(){chrome.runtime.openOptionsPage()}),ct.addEventListener("input",function(){it.textContent=ct.value}),vt.addEventListener("click",function(){jt()}),yt.addEventListener("click",function(){Ye.value=dt.value,It(ge.form)}),at.addEventListener("click",function(){It(ge.form)}),pt.addEventListener("click",function(){Pt(dt.value),pt.textContent="✓",setTimeout(function(){pt.textContent="📋"},1500)})})();